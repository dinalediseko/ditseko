<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Creator - Customer Service</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        body { background: #f0f4f8; font-family: 'Montserrat', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        
        /* Input Panel */
        .controls { 
            background: white; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); 
            margin-bottom: 30px; 
            display: flex; 
            flex-wrap: wrap;
            gap: 20px; 
            max-width: 850px;
            width: 100%;
            justify-content: center;
        }
        .input-group { display: flex; flex-direction: column; gap: 8px; flex: 1; min-width: 200px; }
        label { font-size: 0.75rem; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; }
        input { padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 14px; outline: none; transition: 0.2s; }
        input:focus { border-color: #30398a; box-shadow: 0 0 0 4px rgba(48, 57, 138, 0.1); }
        
        button { 
            background: #30398a; 
            color: white; 
            border: none; 
            padding: 14px 30px; 
            border-radius: 50px; 
            cursor: pointer; 
            font-weight: 700; 
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(48, 57, 138, 0.3);
        }
        button:hover { background: #232a68; transform: translateY(-2px); }

        /* Certificate Preview Area */
        #cert-wrapper {
            background: #cbd5e1;
            padding: 40px;
            border-radius: 10px;
            overflow-x: auto;
            max-width: 100%;
        }

        #cert-container {
            width: 800px;
            height: 565px;
            background: #30398a;
            position: relative;
            overflow: hidden;
            color: #1e293b;
        }

        .cert-body {
            position: absolute;
            left: 0; top: 0;
            width: 660px;
            height: 100%;
            background: white;
            border-top-right-radius: 80px;
            border-bottom-right-radius: 80px;
            padding: 60px;
            box-sizing: border-box;
            z-index: 2;
            box-shadow: 10px 0 30px rgba(0,0,0,0.1);
        }

        /* Geometric Accents */
        .pattern-right {
            position: absolute;
            right: 0; top: 0; width: 140px; height: 100%;
            z-index: 1;
        }

        .accent-circle { position: absolute; border-radius: 50%; }
    </style>
</head>
<body>

    <div class="controls">
        <div class="input-group">
            <label>First Name</label>
            <input type="text" id="firstName" value="William">
        </div>
        <div class="input-group">
            <label>Surname</label>
            <input type="text" id="surname" value="Sebastion">
        </div>
        <div class="input-group">
            <label>Identity Number</label>
            <input type="text" id="idNumber" value="ID-9920334">
        </div>
        <div style="display: flex; align-items: flex-end;">
            <button onclick="downloadPDF()">Download PDF</button>
        </div>
    </div>

    <div id="cert-wrapper">
        <div id="cert-container">
            <div class="pattern-right">
                <div style="position:absolute; top:40px; right:30px; width:50px; height:50px; background:#f4b324; border-radius:8px; transform: rotate(15deg);"></div>
                <div style="position:absolute; top:110px; right:50px; width:30px; height:30px; background:#ea652b; border-radius:50%;"></div>
                <div style="position:absolute; bottom:50px; right:20px; width:90px; height:90px; background:#54b7c8; border-radius:50%; opacity:0.7;"></div>
                <div style="position:absolute; bottom:160px; right:40px; width:40px; height:40px; background:#f4b324; opacity:0.4; border-radius:50%;"></div>
            </div>

            <div class="cert-body">
                <div style="position: absolute; top: 40px; right: 40px; text-align: right;">
                    <div style="font-weight: 900; color: #30398a; font-size: 11px; letter-spacing: 1px;">CERTIFIED PARTNER</div>
                    <div style="width: 50px; height: 3px; background: #ea652b; margin-top: 4px; display: inline-block;"></div>
                </div>

                <h1 style="font-size: 52px; margin: 0; color: #30398a; font-weight: 900; letter-spacing: -1px;">CERTIFICATE</h1>
                <h2 style="font-size: 15px; letter-spacing: 5px; color: #ea652b; margin: 5px 0 0 0; text-transform: uppercase; font-weight: 700;">of achievement</h2>

                <p style="margin-top: 50px; font-size: 11px; color: #94a3b8; font-weight: 800; letter-spacing: 2px;">THIS CERTIFICATE IS PROUDLY PRESENTED TO</p>
                
                <div id="display-full-name" style="font-size: 38px; font-weight: 700; color: #30398a; border-bottom: 2px solid #f1f5f9; margin: 10px 0 25px 0; padding-bottom: 15px; width: 95%;">
                    William Sebastion
                </div>

                <p style="font-size: 14px; line-height: 1.8; color: #475569; width: 90%;">
                    for their excellent performance in Customer Service.
                </p>

                <div style="margin-top: 60px; display: flex; gap: 80px;">
                    <div style="text-align: left;">
                        <div id="display-id" style="font-size: 16px; font-weight: 700; color: #1e293b; letter-spacing: 0.5px;">ID-9920334</div>
                        <div style="border-top: 2px solid #30398a; width: 150px; margin-top: 8px; padding-top: 6px; font-size: 10px; font-weight: 800; color: #64748b; letter-spacing: 1px;">IDENTITY NUMBER</div>
                    </div>
                    <div style="text-align: left;">
                        <div id="display-date" style="font-size: 16px; font-weight: 700; color: #1e293b;">February 20, 2026</div>
                        <div style="border-top: 2px solid #30398a; width: 150px; margin-top: 8px; padding-top: 6px; font-size: 10px; font-weight: 800; color: #64748b; letter-spacing: 1px;">DATE ISSUED</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const fNameInput = document.getElementById('firstName');
        const sNameInput = document.getElementById('surname');
        const idInput = document.getElementById('idNumber');
        
        const displayFullName = document.getElementById('display-full-name');
        const displayID = document.getElementById('display-id');
        const displayDate = document.getElementById('display-date');

        // Automatic current date
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        displayDate.innerText = new Date().toLocaleDateString('en-US', options);

        // Live Preview Logic
        const updatePreview = () => {
            displayFullName.innerText = `${fNameInput.value} ${sNameInput.value}`;
            displayID.innerText = idInput.value;
        };

        [fNameInput, sNameInput, idInput].forEach(input => {
            input.addEventListener('input', updatePreview);
        });

        // PDF Generation
        async function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const element = document.getElementById('cert-container');
            
            // Show loading state
            const btn = document.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Processing...";
            btn.disabled = true;

            try {
                // Capture the div as a high-res image
                const canvas = await html2canvas(element, {
                    scale: 3, // Very high quality
                    useCORS: true,
                    backgroundColor: null
                });

                const imgData = canvas.toDataURL('image/png');
                
                // Create PDF in landscape matching the div aspect ratio
                const pdf = new jsPDF({
                    orientation: 'landscape',
                    unit: 'px',
                    format: [800, 565]
                });

                pdf.addImage(imgData, 'PNG', 0, 0, 800, 565);
                
                // Naming convention: NameSurname.pdf
                const fileName = `${fNameInput.value.trim()}${sNameInput.value.trim()}.pdf`.replace(/\s/g, '');
                pdf.save(fileName);

            } catch (error) {
                console.error("PDF generation error:", error);
                alert("Failed to generate PDF. Check console.");
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
